<!DOCTYPE html >
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý voucher</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.0/css/bootstrap.min.css">
    <style>
        /*.notification {*/
        /*    position: fixed;*/
        /*    top: 50%;*/
        /*    left: 50%;*/
        /*    transform: translate(-50%, -50%);*/
        /*    background-color: rgba(0, 0, 0, 0.8);*/
        /*    color: #fff;*/
        /*    box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.1);*/
        /*    border-radius: 4px;*/
        /*    padding: 20px;*/
        /*    z-index: 9999;*/
        /*    display: none;*/
        /*    animation: fade-in 0.3s ease-in-out;*/
        /*}*/

        /*.notification-icon {*/
        /*    color: #28a745;*/
        /*    margin-right: 10px;*/
        /*}*/

        /*.notification-message {*/
        /*    font-weight: bold;*/
        /*}*/

        /*.notification-close {*/
        /*    border: none;*/
        /*    background-color: transparent;*/
        /*    color: #fff;*/
        /*    cursor: pointer;*/
        /*    font-size: 18px;*/
        /*    position: absolute;*/
        /*    top: 10px;*/
        /*    right: 10px;*/
        /*}*/

        /*@keyframes fade-in {*/
        /*    from {*/
        /*        opacity: 0;*/
        /*        transform: translate(-50%, -50%) scale(0.8);*/
        /*    }*/
        /*    to {*/
        /*        opacity: 1;*/
        /*        transform: translate(-50%, -50%) scale(1);*/
        /*    }*/
        /*}*/
    </style>
</head>

</head>

<body>
<div class="fa-rotate-90">
    <div class="row">
        <div class="col-md-7">
            <h2>Bảng voucher</h2>
            <div th:if="${successMessage}" class="alert alert-success" role="alert">
                <span>&#x2714;</span>
                <span th:text="${successMessage}"></span>
            </div>


            <div th:if="${errorMessage}" class="alert alert-danger" role="alert">
                <i class="fas fa-times-circle"></i>
                <span th:text="${errorMessage}"></span>
            </div>
<!--            <div id="notification" class="notification">-->
<!--                <i class="fas fa-check-circle notification-icon"></i>-->
<!--                <span id="notification-message" class="notification-message"></span>-->
<!--                <button id="notification-close" class="notification-close">&times;</button>-->
<!--            </div>-->

            <form method="post" th:action="@{/voucher/stop}">
                <button type="submit" class="btn btn-danger"
                        onclick="return confirm('Bạn có chắc muốn ngừng hoạt động các voucher đã chọn?')">Ngừng hoạt
                    động
                </button>

                <table class="table" id="voucherTable">

                    <thead>
                    <tr>
                        <th></th>
                        <th>Mã voucher</th>
                        <th>Tên voucher</th>
                        <th>Phần trăm giảm</th>
                        <th>Ngày bắt đầu</th>
                        <th>Ngày kết thúc</th>
                        <th>Số lượng</th>
                        <th>Trạng thái</th>
                        <th colspan="2">Hành động</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="voucher : ${danhSachVoucher}">
                        <td>
                            <input type="checkbox" name="selectedVouchers" th:value="${voucher.id}"/>
                        </td>
                        <td th:text="${voucher.maGiamGia}"></td>
                        <td th:text="${voucher.tenGiamGia}"></td>
                        <td th:text="${voucher.phanTramGiamGia}"></td>
                        <td th:text="${voucher.ngayBatDau}"></td>
                        <td th:text="${voucher.ngayKetThuc}"></td>
                        <td th:text="${voucher.soLuong}"></td>
                        <td>
                            <span th:text="${voucher.trangThai == 1 ? 'Đang hoạt động' : 'Ngưng hoạt động'}"></span>
                        </td>
                        <td>
                            <a th:href="@{/voucher/edit/{id}(id=${voucher.id})}" class="btn btn-primary">Detail</a>
                        </td>
                        <td>
                            <a th:href="@{/voucher/delete/{id}(id=${voucher.id})}" class="btn btn-danger">Delete</a>
                        </td>

                    </tr>
                    </tbody>
                </table>
            </form>
        </div>

        <div class="col-md-5">
            <h2>Thêm mã voucher</h2>
            <div class="container">
                <div class="border p-4">
                    <form method="post" th:action="${action}" th:object="${data}">
                        <div class="row mb-3">
                            <div class="col">
                                <div class="form-floating">
                                    <input type="text" class="form-control" name="maGiamGia" th:field="*{maGiamGia}"
                                           id="maGiamGia"
                                           placeholder="Nhập mã giảm giá"/>
                                    <label for="maGiamGia" class="form-label">Mã giảm giá</label>
                                    <span th:errors="*{maGiamGia}"></span>
                                    <div th:if="${data.duplicate}">
                                        Mã giảm giá đã tồn tại. Vui lòng chọn mã khác.
                                    </div>

                                </div>
                            </div>
                            <div class="col">
                                <div class="form-floating">
                                    <input type="text" class="form-control" name="tenGiamGia" th:field="*{tenGiamGia}"
                                           id="tenGiamGia"
                                           placeholder="Nhập tên">
                                    <label for="tenGiamGia" class="form-label">Tên mã</label>
                                    <span th:errors="*{tenGiamGia}"></span>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col">
                                <div class="form-floating">
                                    <input type="text" class="form-control" name="phanTramGiamGia"
                                           th:field="*{phanTramGiamGia}" id="phanTramGiamGia"
                                           placeholder="Nhập phần trăm giảm giá">
                                    <label for="phanTramGiamGia" class="form-label">Phần trăm giảm giá</label>
                                    <span th:errors="*{phanTramGiamGia}"></span>
                                </div>
                            </div>
                            <div class="col">
                                <div class="form-floating">
                                    <input type="text" class="form-control" name="dieuKienGiamGia"
                                           th:field="*{dieuKienGiamGia}" id="dieuKienGiamGia"
                                           placeholder="Nhập phần trăm giảm giá">
                                    <label for="dieuKienGiamGia" class="form-label">Điều kiện giảm giá</label>
                                    <span th:errors="*{dieuKienGiamGia}"></span>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col">
                                <div class="form-floating">
                                    <input type="date" class="form-control" name="ngayBatDau" th:field="*{ngayBatDau}"
                                           id="ngayBatDau">
                                    <label for="ngayBatDau" class="form-label">Ngày bắt đầu</label>
                                    <span th:errors="*{ngayBatDau}"></span>
                                </div>
                            </div>
                            <div class="col">
                                <div class="form-floating">
                                    <input type="date" class="form-control" name="ngayKetThuc" th:field="*{ngayKetThuc}"
                                           id="ngayKetThuc">
                                    <label for="ngayKetThuc" class="form-label">Ngày kết thúc</label>
                                    <div th:if="${#fields.hasErrors('validDates')}">
                                        <span th:errors="*{validDates}"></span>
                                    </div>

                                </div>
                            </div>
                            <div class="col">
                                <div class="form-floating">
                                    <input type="number" class="form-control" name="soLuong" th:field="*{soLuong}"
                                           id="soLuong"
                                           placeholder="Nhập số lượng mã">
                                    <label for="soLuong" class="form-label">Số lượng mã</label>
                                    <div th:if="${#fields.hasErrors('soLuong')}" >
                                        <span th:errors="*{soLuong}"></span>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="row mb-3">
                            <div class="col">
                                <div class="form-group">
                                    <label class="form-label">Trạng thái</label>
                                    <div class="form-floating">
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="trangThai"
                                                   th:field="*{trangThai}" value="1" id="radioHoatDong">
                                            <label class="form-check-label" for="radioHoatDong">Hoạt động</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="trangThai"
                                                   th:field="*{trangThai}" value="2" id="radioNgungHoatDong">
                                            <label class="form-check-label" for="radioNgungHoatDong">Ngưng hoạt
                                                động</label>
                                        </div>

                                    </div>
                                    <span th:errors="*{trangThai}"></span>
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary" th:text="${button}"></button>
                    </form>
                </div>
            </div>
            <!--phần trăm hay giá tiền-->

        </div>
    </div>
</div>

</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.0/js/bootstrap.bundle.min.js"></script>
<script>
    // function showNotification(message) {
    //     var notification = document.getElementById('notification');
    //     var notificationMessage = document.getElementById('notification-message');
    //     notificationMessage.innerText = message;
    //     notification.style.display = 'block';
    //
    //     setTimeout(function () {
    //         hideNotification();
    //     }, 3000);
    // }
    //
    // function hideNotification() {
    //     var notification = document.getElementById('notification');
    //     notification.style.display = 'none';
    // }
    //
    // var notificationClose = document.getElementById('notification-close');
    // notificationClose.addEventListener('click', hideNotification);
    //
    // // Gọi hàm showNotification với nội dung thông báo cần hiển thị
    // showNotification("Thêm thành công!");
</script>

</html>